<!DOCTYPE html>
<!--
    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
     KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.
-->
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />

        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width,  target-densitydpi=device-dpi" />
        
        <title>Hello World</title>

        <link rel="stylesheet" type="text/css" href="css/main.css" />
        <link rel="stylesheet" type="text/css" href="js/jquery.mobile-1.3.1/jquery.mobile-1.3.1.css" />
 
    </head>
    <body>
        <script type="text/javascript" src="cordova-2.7.0.js"></script>
        <script type="text/javascript" src="js/jQuery.js"></script>
        <script type="text/javascript" src="js/jquery.mobile-1.3.1/jquery.mobile-1.3.1.js"></script>
        <script type="text/javascript" src="js/framework.js"></script>
     
        
  
        


        <div data-role="page" style="padding:0;margin:0;" id="mainpage" data-cache="never">
 
            <script type="text/javascript">
                var ref;
                var type=0;
                var now;
                var count;
                $.mobile.buttonMarkup.hoverDelay = 0
                $("#mainpage").on( "pageshow", function(){
                                    $.mobile.allowCrossDomainPages=true;
                                    if(window.localStorage.getItem("studentPass")=="true"){
                                    var url=window.localStorage.getItem("studentPass.img");
                                    $("#studentPass img").attr("src",url);
                                    $("#studentPass").show();
                                    
                                    
                                    }else{
                                    $("#studentPass").hide();
                                    }
                                  if(window.localStorage.getItem("pass")=="true"){
                                  $("#regularPass").show();
                                  }else{
                                  $("#regularPass").hide();
                                  }
                                  
                                    
                                    });
                
                function showTicket(t){
                    type=t;
                    go("#studentPass");
                    now=$.now();
                    count=180;
                    ref=setInterval(function(){
                                    count--;
                                    $("#count").html(""+count);
                                    if($.now()-now>3*60*1000){
                                    
                                    go("./index.html");
                                    }
                                    
                                    }, 1000);
                }
                
                </script>
            
            
            

        <div class="main">
            
            <div class="title-left" >
                <span style="color:#f48a0d">i</span><span style="color:#0dabf4">Trip</span>
            </div>
            <div class="title-right">
                <input type="text" data-type="search" data-mini="true" placeholder="search">
            </div>
            

            <div class="card card1">
                
                <h1>DESTINATION: </h1>
                <ul>
                    <b>Carnegie Mellon University</b>
                    <li>
                        
                        <b>61D</b> (in 5 minutes)<br/>
                        Arrive at Forbes and Murray in 10:20AM
                    </li>
                    
                    <li>
                        <b>61B</b> (in 13 minutes)<br/>
                        Arrive at Forbes and Murray in 10:27AM
                    </li>
                </ul>
                
            </div>
            
            <div class="card  card2" style="">
                
                <h1>DESTINATION: </h1>
                <ul>
                    <span style="color:#238efb;font-size:18px;">Waterfront</span><br/>
                    <li>
                        
                        <b>64</b> (in 12 minutes)<br/>
                        Arrive at Forbes and Murray in 10:26AM
                    </li>
                    
                    <li>
                        <b>61C</b> (in 22 minutes)<br/>
                        Arrive at Forbes and Murray in 10:36AM
                    </li>
                    <ul>
                        
                        </div>
            
            
            <div class="card card3" stlye="display:none;" id="studentPass" >
                
                <div class="cardTitleLeft"><h1>Student Pass: </h1></div>
                <div class="cardTitleRight">
                <a href="#" onclick="showTicket(1)" data-role="button" data-mini="true" data-inline="true" data-icon="check" data-rel="page" data-transition="slideup">Use</a>
                
                </div>
                <li>
                    <b>Carnegie Mellon University</b>
                    <br/>
                    <center><img src="img/pass.png" width="100%"  style="border-radius:5px;"/></center>
                    
                    
                </li>
                
                
                
                
            </div>
            
            
            <div class="card card3" stlye="display:none;" id="regularPass" >
                
                <div class="cardTitleLeft"><h1>Pass: </h1></div>
                <div class="cardTitleRight">
                    <a href="#" onclick="showTicket(2)" data-role="button" data-mini="true" data-inline="true" data-icon="check" data-rel="page" data-transition="slideup">Use</a>
                    
                </div>
                <li>
                    <b>Weekly Pass</b>
                    <br/>
                    <center><img src="img/portAthorityCard.jpg" width="100%"  style="border-radius:5px;"/></center>
                    
                    
                </li>
                
                
                
                
            </div>
            
            
            
            <div class="bottomMargin">&nbsp;</div>
            
        </div>
        <div class="footBar">
            <div data-role="navbar" data-grid="c" id="tab1">
                <ul>
                    <li onclick="gotoHome(this)"><a href="#" class="ui-btn-active" id="homeTab" >
                        <div><img src="img/home_w.png" height="20px" /></div><div>Home</div></a>
                    </li>
                    <li onclick="gotoTicket(this)"><a href="#" id="ticketTab" ><div>
                        <img src="img/ticket.png" height="20px" /></div><div>Ticket</div></a>
                    </li>
                    <li onclick="gotoMap(this)"><a href="#" id="mapTab"><div>
                        <img src="img/map.png" height="20px" /></div><div>Map</div></a>
                    </li>
                    <li onclick="gotoSetting(this)"><a href="#" id="settingTab">
                        <div><img src="img/setting.png" height="20px" /></div><div>Setting</div></a>
                    </li>
                </ul>
            </div>
        </div>
        </div>
        <div data-role="page" id="studentPass" data-cache="never">
            
            <div style="position:absolute; top:10px;right:10px;">
            <a href="#" onclick="finishPass();" data-role="button" data-mini="true" data-inline="true" data-icon="check" data-rel="page" data-transition="slideup">Finish</a>
            </div>
            
            <div id="count" style="position:absolute;opacity:0.5;top:40%;left:40%; font-size:40px; color:#fff;">180</div>
            <div class="antiFake" id="antiFake">Port Athority<br/>This page will be expired in 3 minutes.</div>
            <center><img src="img/portAthorityCard.jpg" width="320"    id="studentPortal" /></center>
            
            
            <script type="text/javascript">
                
                
                $.mobile.buttonMarkup.hoverDelay = 0;
                
                $("#studentPass").on( "pageshow", function(){
                                     if(type==1){
                                     var url=window.localStorage.getItem("studentPass.img");
                                     $("#studentPortal").attr("src",url);
                                     }
                                     
                                     
                                     
                                     });
                function finishPass(){
                clearInterval(ref);
                    go("./index.html");
                }
                //$("#studentPortal").rotate(90);
                
                </script>
        </div>
    </body>
</html>
